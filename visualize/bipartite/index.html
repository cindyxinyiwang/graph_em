<!-- Popular / About Pashaâ€™s Block cd80ab54c52f80c4d84cad0ba9da72c2
Updated August 7, 2016
bP Example - Double Vertical bP with labels

Open
For more examples, check VizJS

index.html# -->

<!DOCTYPE html>
<meta charset="utf-8">
<style>
text{
	font-size:12px;
}
.mainBars rect{
  shape-rendering: auto;
  fill-opacity: 0;
  stroke-width: 0.5px;
  stroke: rgb(0, 0, 0);
  stroke-opacity: 0;
}
.subBars{
	shape-rendering:crispEdges;
}
.edges{
	stroke:none;
	fill-opacity:0.5;
}
.header{
	text-anchor:middle;
	font-size:16px;
}
line{
	stroke:grey;
}
</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="http://vizjs.org/viz.v1.1.0.min.js"></script>
<script>

// (S) -> (0,1:T)(0,2:T)(0,3:T)(1,2:T)(1,3,2:N)
// (a,b,c) -> (0,c:T)(0,a:T)(0,c,b:N)
// (a,b,c) -> (0,1:T)(0,a:T)(0,b:T)(0,c:T)(1,a:T)(1,c:T)(c,b,a,1,0:N)(b,a,1,0:N)
// (a,b,c,d,e) -> (e,b,a:N)(d,c,b,a:N)
// (a,b,c) -> (0,b:T)(0,c:T)(0,a:T)(0,a:N)
// (a,b) -> (0,b:T)(0,a:T)
// (a,b,c,d) -> (c,b,a:N)(d:T)
// (a,b,c) -> (c,b,a:N)(b,a:N)
// (a,b,c) -> (c,b,a:N)(b,a:N)
// (a,b,c) -> (c,b,a:N)(b,a:N)
// (a,b,c) -> (c,b,a:N)(b,a:N)
// (a,b,c) -> (b,a:N)(b,a:N)(c:T)
// (a,b) -> (0,b:T)(0,a:T)
// (a,b) -> (0,b:T)(0,a:T)
// (a,b) -> (a:N)(b:T)
// (a) -> (a:T)
var data=[['(S)','(0,1:T)(0,2:T)(0,3:T)(1,2:T)(1,3,2:N)',5,0],
['(a,b,c)','(0,c:T)(0,a:T)(0,c,b:N)',3,4],
['(a,b,c)','(0,1:T)(0,a:T)(0,b:T)(0,c:T)(1,a:T)(1,c:T)(c,b,a,1,0:N)(b,a,1,0:N)',8,0],
['(a,b,c,d,e)','(e,b,a:N)(d,c,b,a:N)',2,0],
['(a,b,c)', '(0,b:T)(0,c:T)(0,a:T)(0,a:N)',4,0],
['(a,b)', '(0,b:T)(0,a:T)',2,0],
['(a,b,c,d)', '(c,b,a:N)(d:T)',2,0],
['(a,b,c)', '(c,b,a:N)(b,a:N)',2,0],
['(a,b,c)', '(c,b,a:N)(b,a:N)',2,0],
['(a,b,c)', '(c,b,a:N)(b,a:N)',2,0],
['(a,b,c)', '(c,b,a:N)(b,a:N)',2,0],
['(a,b,c)', '(b,a:N)(b,a:N)(c:T)',3,0],
['(a,b)', '(0,b:T)(0,a:T)',2,0],
['(a,b)', '(0,b:T)(0,a:T)',2,0],
['(a,b)', '(a:N)(b:T)',2,0],
['(a)', '(a:T)',1,0],
// ['Grand','CA',1551// ,15],
// ['Elite','CA',141,0],
// ['Lite','AZ',5453,35],
// ['Small','AZ',683,1],
];
var color ={'(S)':"#3366CC", '(a,b,c)':"#DC3912",  "(a,b,c,d,e)":"#FF9900", '(a)':"#109618", '(a,b,c,d)':"#990099", Small:"#0099C6"};
var svg = d3.select("body").append("svg").attr("width", 960).attr("height", 800);

svg.append("text").attr("x",250).attr("y",70)
	.attr("class","header").text("Karate Club: HRG PRs");
	
// svg.append("text").attr("x",750).attr("y",70)
// 	.attr("class","header").text("Sales");

var g =[svg.append("g").attr("transform","translate(150,100)")
		,svg.append("g").attr("transform","translate(650,100)")];

var bp=[ viz.bP()
		.data(data)
		.min(12)
		.pad(1)
		.height(300)
		.width(200)
		.barSize(35)
		.fill(d=>color[d.primary])		
	,// viz.bP()
// 		.data(data)
// 		.value(d=>d[3])
// 		.min(12)
// 		.pad(1)
// 		.height(600)
// 		.width(200)
// 		.barSize(35)
// 		.fill(d=>color[d.primary])
];
		
[0,1].forEach(function(i){
	g[i].call(bp[i])
	
	g[i].append("text").attr("x",-50).attr("y",-8).style("text-anchor","middle").text("LHS");
	g[i].append("text").attr("x", 250).attr("y",-8).style("text-anchor","middle").text("RHS");
	
	g[i].append("line").attr("x1",-100).attr("x2",0);
	g[i].append("line").attr("x1",200).attr("x2",300);
	
	g[i].append("line").attr("y1",610).attr("y2",610).attr("x1",-100).attr("x2",0);
	g[i].append("line").attr("y1",610).attr("y2",610).attr("x1",200).attr("x2",300);
	
	g[i].selectAll(".mainBars")
		.on("mouseover",mouseover)
		.on("mouseout",mouseout);

	g[i].selectAll(".mainBars").append("text").attr("class","label")
		.attr("x",d=>(d.part=="primary"? -30: 30))
		.attr("y",d=>+6)
		.text(d=>d.key)
		.attr("text-anchor",d=>(d.part=="primary"? "end": "start"));
	
	g[i].selectAll(".mainBars").append("text").attr("class","perc")
		.attr("x",d=>(d.part=="primary"? -100: 380))
		.attr("y",d=>+6)
		.text(function(d){ return d3.format("0.0%")(d.percent)})
		.attr("text-anchor",d=>(d.part=="primary"? "end": "start"));
});

function mouseover(d){
	[0,1].forEach(function(i){
		bp[i].mouseover(d);
		
		g[i].selectAll(".mainBars").select(".perc")
		.text(function(d){ return d3.format("0.0%")(d.percent)});
	});
}
function mouseout(d){
	[0,1].forEach(function(i){
		bp[i].mouseout(d);
		
		g[i].selectAll(".mainBars").select(".perc")
		.text(function(d){ return d3.format("0.0%")(d.percent)});
	});
}
d3.select(self.frameElement).style("height", "800px");
</script>
</body>
</html>